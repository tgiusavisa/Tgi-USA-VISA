{% extends "base.html" %}
{% block content %}
<style>
    .carousel-caption {
         position: absolute;
         left: 0;
         right: 0;
         bottom: 0;
         padding: 2rem 1.5rem;
         background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, transparent 100%);
         text-align: left;
     }
     .main-hero-container{
         height:85vh;
     }
     /* Add this to your CSS */
    .col-4.position-fixed {
        transition: right 2s ease-out; /* Smooth movement */
    }

    @media (max-width: 768px) {
        .col-4.position-fixed {
            right: 1% !important; /* Force mobile position */
        }
    }
     @media (min-width: 768px) {
         .carousel-caption {
             padding: 3rem 2.5rem;
             background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 60%, transparent 100%);
         }
    }
</style>
<main class='w-100 p-0 m-0 position-relative'> 
    <div class="main-hero-container container mt-4">
        <div class="row justify-content-between" style='height:65vh;'>
            <div class="col-8">
              <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">
              <div class="carousel-inner rounded-5 border">
                <div class="carousel-item active">
                <img src="/static/images/img1.jpg" class="d-block w-100" alt="..." style='height:65vh; width:100%; object-fit:cover;'>
                    <div class="carousel-caption d-none d-md-block pt-0 pb-1">
                        <div class='text-white fw-bolder fs-4 ms-2'>
                            <span id="visitor-count">{{ visitor_count }}</span>+ 
                            <span class='fs-6 fw-normal'>Visitors</span>
                        </div>
                        <h2 class='fs-2 text-white fw-bold me-5'>Apply for a U.S. Visa from India</h2>  
                    </div>
                </div>
                <div class="carousel-item">
                <img src="/static/images/hero.jpg" class="d-block w-100" alt="..." style='height:65vh; width:100%; object-fit:cover;'>
                    <div class="carousel-caption d-none d-md-block pt-0 pb-1">
                        <div class='text-white fw-bolder fs-4 ms-2'>
                            <span id="visitor-count">{{ visitor_count }}</span>+ 
                            <span class='fs-6 fw-normal'>Visitors</span>
                        </div>
                        <h2 class='fs-2 text-white fw-bold me-5'>First Slide Heading</h2>
                    </div>
                </div>
                <div class="carousel-item">
                <img src="./static/images/herosec2.png" class="d-block w-100" alt="..." style='height:65vh; width:100%; object-fit:cover;'>
                    <div class="carousel-caption d-none d-md-block pt-0 pb-1">
                        <div class='text-white fw-bolder fs-4 ms-2'>
                            <span id="visitor-count">{{ visitor_count }}</span>+ 
                            <span class='fs-6 fw-normal'>Visitors</span>
                        </div>
                        <h2 class='fs-2 text-white fw-bold me-5'>First Slide Heading</h2>
                    </div>
                </div>
              </div>
            </div>
            <div class='text-center fw-bolder fs-2 main-heading rounded-5 p-2 text-dark mt-4' style='background-color: #FFDD00; padding-bottom:1px !important;'>Guaranteed Visa Appointment Scheduled Within 1 to 8 Weeks</div>
        </div>
            <div class="col-4 position-fixed bg-white rounded-4 pb-3 pt-2 border border-gray shadow-sm" style='z-index:1000; top:9%; right:1%;'>
              <div class='fw-bolder fs-5 main-heading text-center'>Get Appointment Guaranteed </div>
                {% load form_tags %}

{% render_dynamic_form "appointment_form" %}
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    {% comment %} <div class='main-homesection w-100 position-relative'>
        <div class='z-1 homepopup position-absolute end-0 me-3 mt-6 w-25 rounded-5 p-3'>
            <div class='w-100 d-flex flex-column justify-content-center align-items-center' style='margin-top:-17px;'>    
                <div class='homepopup-btn w-25 line p-1 mt-2 mb-2 rounded-5 bg-white' style='cursor:pointer;'></div>
            </div>
                <div class='text-white fw-bolder fs-4 ms-2'>
                    <span id="visitor-count">{{ visitor_count }}</span>+ 
                    <span class='fs-6 fw-normal'>Visitors</span>
                </div>
                <div class='d-flex flex-row justify-content-between align-items-center mb-1'>
                    <div class='h-sec bg-white text-break rounded-4 d-flex flex-column justify-content-between align-items-center pt-2 pb-2'>
                        <div class='inner-div-num fw-bolder fs-3 text-break'>2005</div>
                        <div class='inner-div-sub fs-6 text-dark fw-bold text-break fw-bold' style=''>Since</div>
                    </div>
                    <div class='h-sec bg-white text-break rounded-4 d-flex flex-column justify-content-between align-items-center pt-2 pb-2'>
                        <div class='inner-div-num fw-bolder fs-3 text-break'>7500+</div>
                        <div class='inner-div-sub fs-6 text-dark fw-bold text-break fw-bold'>Happy Clients</div>
                    </div>
                </div>
                <div class='d-flex flex-column justify-content-evenly align-items-center'>
                    <div class='bg-white w-100 text-break rounded-4 m-1' style='cursor:pointer;'>
                        <div class='d-flex flex-row justify-content-evenly align-items-center' >
                            <div class='w-25 p-2'>
                                <img src="/static/images/img1.jpg" alt="Full Name" class='rounded-3' style='width: 50px; hight:50px;'>
                            </div>
                            <div class='w-75 me-2 ms-2 mb-2'>
                                <div class='d-flex flex-row justify-content-between align-items-center'>
                                    <div class='text-secondary' style='font-size:11px; font-weight:700;'>Articals</div>
                                    <div>
                                        <svg viewBox="0 0 24 24" fill="currentColor" class="img-right-arrow" style='transform: scaleX(-1);'>
                                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class='text-break text-dark' style='font-size:14px; font-weight:600;'>Top 3 Visa Perfect For Your Business ...</div>
                            </div>
                        </div>
                    </div>
                    <div class='bg-white w-100 text-break rounded-4 m-1' style='cursor:pointer;'>
                        <div class='d-flex flex-row justify-content-evenly align-items-center'>
                            <div class='w-25 p-2'>
                                <img src="/static/images/img1.jpg" alt="Full Name" class='rounded-3' style='width: 50px; hight:50px;'>
                            </div>
                            <div class='w-75 me-2 ms-2 mb-2'>
                                <div class='d-flex flex-row justify-content-between align-items-center'>
                                    <div class='text-secondary' style='font-size:11px; font-weight:700;'>Articals</div>
                                    <div>
                                        <svg viewBox="0 0 24 24" fill="currentColor" class="img-right-arrow" style='transform: scaleX(-1);'>
                                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class='text-break text-dark' style='font-size:14px; font-weight:600;'>Top 3 Visa Perfect For Your Business ...</div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        <div class="position-absolute top-50 start-50 translate-middle w-75">
            <div class='w-100 d-flex flex-column justify-content-center align-items-center'>
                <div class='fs-5 fw-bold text-white w-50 text-center'>A Subsidiary Of India's Leading TGI USA Visa Consultancy Company</div>
                <div class='w-75 line mt-2 mb-2'></div>
                <div class="w-75 header-inner-sec index-head row row-cols-4 justify-content-around pb-5 ps-3 pe-3">
                    {% for visa in visas %}
                    <a href="{% url 'visa_detail' visa.slug %}" class='fs-5 text-decoration-none align-items-center justify-content-evenly d-flex rounded-pill text-white fw-bold pb-1 ps-4 pe-4 m-1'>{{ visa.heading1 }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class='company-heading position-absolute bottom-0 start-50 translate-middle-x mb-5 w-100 text-center'>
            <h1>TGI USA VISA<h1>
        </div>
    </div> {% endcomment %}
    <div class='container'>
        <div class='main-aboutsection w-100 row mt-5 mb-5'>
            {% for item in home.about_us.all %}
              <div class='col-7'>
                  <div class='fw-bolder fs-2 main-heading'>{{ item.heading }}</div>
                  <div class='line mb-2 ms-2 w-25'></div>
                  <p class="text-break">{{ item.description|safe }}</p>
                  <a href="/about/" class='w-25  text-decoration-none align-items-center justify-content-center d-flex rounded-pill fw-bold pt-2 pb-2  button2 text-dark border-2'  style='border: 2px solid rgba(255, 221, 0, 1) !important;'>
                      Know More
                  </a>

              </div>
              {% comment %} <div class='sec2 col-4'>
                  <img src="{{ item.image.url }}" alt="{{ item.heading }}"/>
              </div> {% endcomment %}
            {% endfor %}
        </div>
    </div>
    {% comment %} <div class='main-visa w-100 d-flex flex-row justify-content-center align-items-center'>
        <div class='sub-main-visa border-2 d-flex flex-column justify-content-start align-items-center'>
            <h2 class='fs-2 main-heading text-dark text-center pt-4'>Find the Perfect Visa for Your Work Needs</h2>
            <div class='line mt-2 mb-2' style='background-color: rgba(230, 0, 0, 1);'></div>
            <div class="container ps-5 pe-5">
                <div class="row row-cols-4 justify-content-around pb-5 ps-3 pe-3">
                  {% for visa in visas %}
                    <a href="{% url 'visa_detail' visa.slug %}" class="col visa-card position-relative rounded-4 overflow-hidden text-white text-decoration-none mt-4 d-flex flex-column justify-content-end" style='background-image: url("{{ visa.img.url }}");'>
                        <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark" style="z-index: 1; opacity: 0.2;"></div>
                        <div class="visa-card-heading w-100 mb-3 pt-1 pb-1" style="z-index: 2;">{{ visa.heading1 }}</div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div> {% endcomment %}
    <div class='container w-100 mt-5 mb-5'>
        <div class='col-7'>
            <div class='fw-bolder fs-2 main-heading'>25+ Years old Company</div>
            <div class='line mb-2 ms-2'></div>
            <div class="container">
              <div class="row row-cols-2">
                  {% for highlight in home.highlights.all %}
                  <div class="col old-company-sec m-2 d-flex flex-column justify-content-center align-items-center">
                      <div class='inc text-break fs-2 fw-bold'>{{ highlight.number }}</div>
                      <div class='inc text-break fs-6 fw-bold text-center'>{{ highlight.heading }}</div>
                  </div>
                  {% endfor %}
              </div>
            </div>
        </div>
    </div>
    <div class='container w-100 position-relative' id="tabs-container">
    <!-- Tab Buttons -->
    <div class='w-50'>
        <div class='w-100 m-auto d-flex flex-row justify-content-between'>
            <button class='tab-btn active rounded-pill fw-bold pt-2 pb-2 ps-4 pe-4 text-dark border-2 fs-6' data-tab="mission">
                Our Mission
            </button>
            <button class='tab-btn rounded-pill fw-bold pt-2 pb-2 ps-4 pe-4 text-dark border-2 fs-6' data-tab="vision">
                Our Vision
            </button>
            <button class='tab-btn rounded-pill fw-bold pt-2 pb-2 ps-4 pe-4 text-dark border-2 fs-6' data-tab="goal">
                Our Goal
            </button>
        </div>
    </div>

    <!-- Tab Contents -->
    <div class="tab-contents">
        <!-- Mission Tab -->
        <div class='tab-content active' id="mission">
            <div class='w-100 our-thinksection d-flex flex-column align-items-center'>
                <div class='w-100'>
                    <div class='container w-100 mt-5'>
                      {% for item in home.our_mission.all %}
                        <div class='col-7'>
                          <div class='fw-bolder fs-2 main-heading'>{{item.heading}}</div>
                          <div class='line mb-2 ms-2 w-25'></div>
                          <p class="text-break">{{item.description | safe}}</p>
                          <div class='w-25 d-flex flex-row justify-content-between align-items-center'>
                              <button class='nav-arrow left-arrow bg-transparent btn-link btn p-0 m-0'>
                                  <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon">
                                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                  </svg>
                              </button>
                              <button class='nav-arrow right-arrow bg-transparent btn-link btn p-0 m-0'>
                                  <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon" style='transform: scaleX(-1);'>
                                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                  </svg>
                              </button>
                          </div>
                        </div>
                        {% comment %} <div class='sec2'>
                            <img src="{{ item.image.url }}" alt="{{ item.heading }}" class='object-fit-contain'/>
                        </div> {% endcomment %}
                      {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Vision Tab -->
        <div class='tab-content' id="vision">
            <div class='w-100 our-thinksection d-flex flex-column align-items-center'>
                <div class='w-100'>
                    <div class='main-aboutsection w-100 mt-5'>
                      {% for item in home.Our_vision.all %}
                        <div class='col-7'>
                            <div class='fw-bolder fs-2 main-heading'>{{ item.heading }}</div>
                            <div class='line mb-2 ms-2 w-25'></div>
                            <p class="text-break">{{ item.description | safe }}</p>
                            <div class='w-25 d-flex flex-row justify-content-between align-items-center'>
                                <button class='nav-arrow left-arrow bg-transparent btn-link btn p-0 m-0'>
                                    <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon">
                                      <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                    </svg>
                                </button>
                                <button class='nav-arrow right-arrow bg-transparent btn-link btn p-0 m-0'>
                                    <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon" style='transform: scaleX(-1);'>
                                      <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        {% comment %} <div class='sec2'>
                            <img src="{{ item.image.url }}" alt="{{ item.heading }}" class='object-fit-contain'/>
                        </div> {% endcomment %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Goal Tab -->
        <div class='tab-content' id="goal">
            <div class='w-100 our-thinksection d-flex flex-column align-items-center'>
                <div class='w-100'>
                    <div class='main-aboutsection w-100 mt-5'>
                      {% for item in home.our_goals.all %}
                        <div class='col-7'>
                            <div class='fw-bolder fs-2 main-heading'>{{ item.heading }}</div>
                            <div class='line mb-2 ms-2 w-25'></div>
                            <p class="text-break">{{ item.description | safe }}</p>
                            <div class='w-25 d-flex flex-row justify-content-between align-items-center'>
                                <button class='nav-arrow left-arrow bg-transparent btn-link btn p-0 m-0'>
                                    <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon">
                                      <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                    </svg>
                                </button>
                                <button class='nav-arrow right-arrow bg-transparent btn-link btn p-0 m-0'>
                                    <svg viewBox="0 0 24 24" fill="currentColor" class="svg-icon" style='transform: scaleX(-1);'>
                                      <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        {% comment %} <div class='sec2'>
                            <img src="{{ item.image.url }}" alt="{{ item.heading }}" class='object-fit-contain'/>
                        </div> {% endcomment %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    {% comment %} <div class='w-100 have-questions d-flex flex-column align-items-center'>
        <div class='w-50 d-flex flex-column justify-content-evenly align-items-center m-auto'>
            <div class='fw-bolder fs-2 main-heading'>Have Any Question's</div>
                <div class='line m-3 '></div>
                <p class="text-break  text-center w-75">
                    We will Love to Answers your questions. Please Fill in your details our team will contact with you in 24h.
                </p>
            </button>
        </div>
        <div class='sec'>
            <div class='d-flex flex-row justify-content-between'>    
                <div class="input-group w-50 p-3">
                    <span class="input-group-text form-img form-sec-01 pt-2 pb-2" style="border-radius: 12px 0 0 12px; border: 1.2px solid rgba(0, 0, 0, 0.5); border-right: none !important">
                      <img src="/static/images/icons/account.svg" alt="Full Name" class='rounded'/>
                    </span>
                    <input type="text" class="form-control form-sec-01 fs-5 pt-2 pb-2" style="border-radius: 0 12px 12px 0; border: 1.2px solid rgba(0, 0, 0, 0.5); border-left: none !important" id="full-name" placeholder="Full Name">
                </div>
                <div class="input-group w-50 p-3">
                    <span class="input-group-text form-img form-sec-01 pt-2 pb-2" style="border-radius: 12px 0 0 12px; border: 1.2px solid rgba(0, 0, 0, 0.5); border-right: none !important">
                      <img src="/static/images/icons/phone.svg" alt="Phone Number" class='rounded'/>
                    </span>
                    <input type="text" class="form-control form-sec-01 fs-5 pt-2 pb-2" style="border-radius: 0 12px 12px 0; border: 1.2px solid rgba(0, 0, 0, 0.5); border-left: none !important" id="phone-number" placeholder="Phone Number">
                </div>
            </div>
            <div class='d-flex flex-row justify-content-between'>    
                <div class="input-group w-50 p-3">
                    <span class="input-group-text form-img form-sec-01 pt-2 pb-2" style="border-radius: 12px 0 0 12px; border: 1.2px solid rgba(0, 0, 0, 0.5); border-right: none !important">
                      <img src="/static/images/icons/email.svg" alt="Email Address" class='rounded'/>
                    </span>
                    <input type="text" class="form-control form-sec-01 fs-5 pt-2 pb-2" style="border-radius: 0 12px 12px 0; border: 1.2px solid rgba(0, 0, 0, 0.5); border-left: none !important" id="email" placeholder="Email Address">
                </div>
                <div class="input-group w-50 p-3">
                    <span class="input-group-text form-img form-sec-01 pt-2 pb-2" style="border-radius: 12px 0 0 12px; border: 1.2px solid rgba(0, 0, 0, 0.5); border-right: none !important">
                      <img src="/static/images/icons/visa.svg" alt="Visa" class='rounded'/>
                    </span>
                    <select class="form-select form-control form-sec-01 fs-5 pt-2 pb-2" style="border-radius: 0 12px 12px 0; border: 1.2px solid rgba(0, 0, 0, 0.5); border-left: none !important" id="visa">
                        <option value="" selected disabled id="defaultOption">Visa Type</option>
                        {% for visa in visas %}
                            <option value="{{ visa.id }}">{{ visa.heading1 }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class='d-flex flex-row justify-content-between'>    
                <div class="input-group w-100 p-3">
                    <textarea rows='4' class="form-control form-sec-01 fs-5 pt-2 pb-2" style="border-radius: 12px; border: 1.2px solid rgba(0, 0, 0, 0.5);" id="email" placeholder="We Love to Answers Your Questions !"></textarea>
                </div>
            </div>
            <div class='w-100 d-flex flex-column justify-content-center align-items-center'>
            <a href="#" class='mt-3 w-50 text-center text-decoration-none align-items-center justify-content-center d-flex rounded-pill fw-bold pt-2 pb-2  button2 text-dark border-2 fs-5'>
                Start Application
            </a>
            <p class="text-break text-center mt-3">
            We only share our details with our trusted team members! <br>Terms & Conditions 
            </p>
        </div>
        </div>
        </div>
    </div> {% endcomment %}

    <div class='container w-100 have-questions pt-5'>
        <div class='col-7 bg-white'>
            <div class='fw-bolder fs-2 main-heading'>Frequently Asked Questions</div>
            <div class='line m-3 '></div>
        </div>
        <div class='col-7'>
            <div class="accordion" id="accordionFaq">
                {% for faq in home.faq.all %}
                <div class="accordion-item mb-3 rounded-4" style='background-color: rgba(255, 221, 0, 0.29); border: 1.5px solid #FFDD00;'>
                    <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                        <button class="accordion-button {% if not forloop.first %}collapsed{% endif %} border-0 shadow-none bg-transparent" 
                                type="button" 
                                data-bs-toggle="collapse" 
                                data-bs-target="#collapse{{ forloop.counter }}" 
                                aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" 
                                aria-controls="collapse{{ forloop.counter }}">
                            <span class='fw-bolder fs-4 main-heading text-dark'>{{ faq.heading }}</span>
                        </button>
                    </h2>
                    <div id="collapse{{ forloop.counter }}" 
                         class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" 
                         aria-labelledby="heading{{ forloop.counter }}" 
                         data-bs-parent="#accordionFaq">
                        <div class="accordion-body">
                            {{ faq.description|safe }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>
<script>
// In your index.html, modify the traveller counter logic
document.addEventListener('DOMContentLoaded', function() {
    const minusBtn = document.querySelector('.minus-btn');
    const plusBtn = document.querySelector('.plus-btn');
    const travellerCount = document.querySelector('.traveller-count');
    const travellersInput = document.getElementById('travellers');
    
    let count = 1;
    
    // Initialize with default value
    travellersInput.value = count;
    
    minusBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (count > 1) {
            count--;
            updateTravellerCount();
        }
    });
    
    plusBtn.addEventListener('click', function(e) {
        e.preventDefault();
        count++;
        updateTravellerCount();
    });
    
    function updateTravellerCount() {
        travellerCount.textContent = count;
        travellersInput.value = count; // Store just the number
    }
});

// Update the form submission function
function submitAppointmentForm() {
    const visaSelect = document.getElementById('visa');
    const locationSelect = document.getElementById('appointmentLocation');
    const travellersInput = document.getElementById('travellers');
    
    const visaValue = visaSelect.value;
    const locationValue = locationSelect.value;
    const travellersValue = document.querySelector('.traveller-count').textContent; // Get the actual number
    
    if (!visaValue) {
        alert('Please select a visa type');
        return;
    }
    
    // Construct the URL with proper values
    const url = `/visa/${visaValue}/schedule-appointment/?location=${locationValue}&travelers=${travellersValue}`;
    window.location.href = url;
}
</script>
{% endblock %}